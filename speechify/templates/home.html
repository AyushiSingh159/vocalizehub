<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VocalizeHub</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/all.min.js"></script>

    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; }
        #text-container { border: 1px solid #ddd; padding: 15px; margin-bottom: 20px; }

        .player-container {
            background-color: #f0f0f0;
            border-radius: 25px;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 500px;
            margin-top: 20px;
        }

        .play-button {
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            padding: 0;
            margin-right: 10px;
        }

        .time-display {
            font-size: 0.9em;
            color: #333;
            margin-right: 10px;
            width: 50px;
            text-align: center;
        }

        .progress-bar-container {
            flex-grow: 1;
            display: flex;
            align-items: center;
            margin-right: 10px;
            cursor: pointer;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #ddd;
            border-radius: 5px;
            position: relative;
        }

        .progress {
            height: 8px;
            background-color: #666;
            border-radius: 5px;
            width: 0%;
        }

        .speed-options {
            display: inline-flex;
            margin-right: 10px;
        }

        .speed-button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 0.9em;
            margin-right: 5px;
        }

        .speed-button.active {
            font-weight: bold;
            color: #3498db;
        }
    </style>
</head>
<body>
    <h1>VocalizeHub</h1>
    <div id="text-container">
        <p id="text-to-read">
            What impact is my behavior having on the world?
            Consequentialism as the name suggests focuses on the consequences of events. In consequentialism we do what gives us the best consequences that is good is thought prior to right. Consequentialism means one thing that is maximizing pleasure. Another way of describing consequentialism is that actions should be judged right or wrong on the basis of their consequences.
            Different forms of consequentialism differ over what the good thing is that should be maximized. 
            Utilitarianism states that people should maximize human welfare or well-being (which they used to call 'utility' - hence the name).
            Hedonism stated that people should maximize human pleasure.
            Critics argue that consequentialism can justify morally questionable actions, that means even murders have reasons and hence it cannot be considered as an act of crime. Consequentialism may provide reasons but the main question arises if the act is morally right? If we go on by both totally morals, emotions no act can be considered as wrong-doing, this may weaken the overall judgement process.
        </p>
    </div>

    <div class="player-container">
        <button class="play-button" id="playButton"><i class="fas fa-play"></i></button>
        <span class="time-display" id="currentTime">0:00</span> /
        <span class="time-display" id="totalTime">0:00</span>
        <div class="progress-bar-container" id="progressBarContainer">
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
        </div>
        <div class="speed-options">
            <button class="speed-button" data-speed="0.5">0.5x</button>
            <button class="speed-button active" data-speed="1">1x</button>
            <button class="speed-button" data-speed="1.15">1.15x</button>
            <button class="speed-button" data-speed="1.5">1.5x</button>
            <button class="speed-button" data-speed="2">2x</button>
        </div>
    </div>

    <script>
        const textToRead = document.getElementById("text-to-read").innerText;
        const playButton = document.getElementById("playButton");
        const currentTimeDisplay = document.getElementById("currentTime");
        const totalTimeDisplay = document.getElementById("totalTime");
        const progressBar = document.getElementById("progress");
        const progressBarContainer = document.getElementById("progressBarContainer");
        const speedButtons = document.querySelectorAll(".speed-button");

        let speech = new SpeechSynthesisUtterance();
        let speaking = false;
        let currentSpeed = 1;
        let estimatedDuration = 0;
        let currentWordIndex = 0;
        let wordsArray = textToRead.split(/\s+/);

        function estimateDuration() {
            const wordsPerMinute = 180;
            estimatedDuration = (wordsArray.length / wordsPerMinute) * 60;
            totalTimeDisplay.innerText = formatTime(estimatedDuration);
        }

        estimateDuration();

        playButton.addEventListener("click", function () {
            if (!speaking) {
                startSpeech();
            } else {
                stopSpeech();
            }
        });

        function startSpeech() {
            speech.text = wordsArray.slice(currentWordIndex).join(" ");
            speech.rate = currentSpeed;
            window.speechSynthesis.speak(speech);
            speaking = true;
            playButton.innerHTML = '<i class="fas fa-pause"></i>';
            updateProgress();
        }

        function stopSpeech() {
            window.speechSynthesis.cancel();
            speaking = false;
            playButton.innerHTML = '<i class="fas fa-play"></i>';
        }

        function updateProgress() {
            let interval = setInterval(() => {
                let progress = (currentWordIndex / wordsArray.length) * 100;
                progressBar.style.width = `${progress}%`;
                let elapsedTime = (estimatedDuration * currentWordIndex) / wordsArray.length;
                currentTimeDisplay.innerText = formatTime(elapsedTime);
                if (!speaking) clearInterval(interval);
            }, 500);
        }

        speedButtons.forEach(button => {
            button.addEventListener("click", () => {
                currentSpeed = parseFloat(button.getAttribute("data-speed"));
                speech.rate = currentSpeed;
                estimateDuration();
                speedButtons.forEach(btn => btn.classList.remove("active"));
                button.classList.add("active");

                if (speaking) {
                    window.speechSynthesis.cancel();
                    startSpeech();
                }
            });
        });

        progressBarContainer.addEventListener("click", function (event) {
            let rect = progressBarContainer.getBoundingClientRect();
            let clickX = event.clientX - rect.left;
            let percent = clickX / rect.width;
            currentWordIndex = Math.floor(wordsArray.length * percent);
            let newTime = estimatedDuration * percent;
            currentTimeDisplay.innerText = formatTime(newTime);
            progressBar.style.width = `${percent * 100}%`;

            if (speaking) {
                window.speechSynthesis.cancel();
                startSpeech();
            }
        });

        function formatTime(seconds) {
            let mins = Math.floor(seconds / 60);
            let secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? "0" : ""}${secs}`;
        }
    </script>
</body>
</html>
